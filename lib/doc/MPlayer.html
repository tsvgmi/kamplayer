<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Class: MPlayer</title>
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (M)</a> &raquo; 
    
    
    <span class="title">MPlayer</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: MPlayer
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">MPlayer</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">mpshell.rb</dd>
  
</dl>
<div class="clear"></div>



  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#cursong-instance_method" title="#cursong (instance method)">- (Object) <strong>cursong</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute cursong.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#playlist-instance_method" title="#playlist (instance method)">- (Object) <strong>playlist</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute playlist.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#pmode-instance_method" title="#pmode (instance method)">- (Object) <strong>pmode</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute pmode.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#scan_mode-instance_method" title="#scan_mode (instance method)">- (Object) <strong>scan_mode</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute scan_mode.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#trace-instance_method" title="#trace (instance method)">- (Object) <strong>trace</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute trace.
</p>
</div></span>
  
</li>

    
  </ul>


  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#kill_process-class_method" title="kill_process (class method)">+ (Object) <strong>kill_process</strong>(ptn, sig = &quot;HUP&quot;) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#start_monitor-class_method" title="start_monitor (class method)">+ (Object) <strong>start_monitor</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Start the stand-alone monitor.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stop_monitor-class_method" title="stop_monitor (class method)">+ (Object) <strong>stop_monitor</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_songs-instance_method" title="#add_songs (instance method)">- (Object) <strong>add_songs</strong>(mset, renew) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (MPlayer) <strong>initialize</strong>(playlist, options) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
A new instance of MPlayer.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#monitor_curfile-instance_method" title="#monitor_curfile (instance method)">- (Object) <strong>monitor_curfile</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Monitor the file being played.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#osd-instance_method" title="#osd (instance method)">- (Object) <strong>osd</strong>(msg) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#run_init-instance_method" title="#run_init (instance method)">- (Object) <strong>run_init</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
This is _run after player has started.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send-instance_method" title="#send (instance method)">- (Object) <strong>send</strong>(msg, wait = 0) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#show_playlist-instance_method" title="#show_playlist (instance method)">- (Object) <strong>show_playlist</strong>(range = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#song_jump-instance_method" title="#song_jump (instance method)">- (Object) <strong>song_jump</strong>(target) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#song_step-instance_method" title="#song_step (instance method)">- (Object) <strong>song_step</strong>(step) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sound_normalize-instance_method" title="#sound_normalize (instance method)">- (Object) <strong>sound_normalize</strong>(ksel = nil, omode = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stop-instance_method" title="#stop (instance method)">- (Object) <strong>stop</strong>(killit = false) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#switch_aspect-instance_method" title="#switch_aspect (instance method)">- (Object) <strong>switch_aspect</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#switch_channel-instance_method" title="#switch_channel (instance method)">- (Object) <strong>switch_channel</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#toggle_pmode-instance_method" title="#toggle_pmode (instance method)">- (Object) <strong>toggle_pmode</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#toggle_scan-instance_method" title="#toggle_scan (instance method)">- (Object) <strong>toggle_scan</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#toggle_trace-instance_method" title="#toggle_trace (instance method)">- (Object) <strong>toggle_trace</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="MPlayer (class)">MPlayer</a></span></tt>) <strong>initialize</strong>(playlist, options) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
A new instance of MPlayer
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


183
184
185
186
187
188
189
190
191
192
193
194
195
196
197</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mpshell.rb', line 183</span>

<span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='playlist identifier id'>playlist</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='@wchan ivar id'>@wchan</span>   <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
  <span class='@rc ivar id'>@rc</span>      <span class='assign token'>=</span> <span class='MPlayerRC constant id'>MPlayerRC</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='@channel ivar id'>@channel</span> <span class='assign token'>=</span> <span class='symbol val'>:left</span>
  <span class='@aspect ivar id'>@aspect</span>  <span class='assign token'>=</span> <span class='symbol val'>:normal</span>
  <span class='@pmode ivar id'>@pmode</span>   <span class='assign token'>=</span> <span class='symbol val'>:sound</span>
  <span class='@options ivar id'>@options</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span>
  <span class='@volume ivar id'>@volume</span>  <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:volume</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='integer val'>50</span>
  <span class='@trace ivar id'>@trace</span>   <span class='assign token'>=</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='symbol val'>:verbose</span><span class='rbrack token'>]</span>

  <span class='@cursong ivar id'>@cursong</span>   <span class='assign token'>=</span> <span class='CurrentSong constant id'>CurrentSong</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='playlist identifier id'>playlist</span><span class='rparen token'>)</span>
  <span class='@playlist ivar id'>@playlist</span>  <span class='assign token'>=</span> <span class='playlist identifier id'>playlist</span>
  <span class='@scan_mode ivar id'>@scan_mode</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
  <span class='@listsize ivar id'>@listsize</span>  <span class='assign token'>=</span> <span class='integer val'>20</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="cursong=-instance_method"></span>
      <span id="cursong-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="cursong-instance_method">
  
    - (<tt>Object</tt>) <strong>cursong</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute cursong
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


181
182
183</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mpshell.rb', line 181</span>

<span class='def def kw'>def</span> <span class='cursong identifier id'>cursong</span>
  <span class='@cursong ivar id'>@cursong</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="playlist=-instance_method"></span>
      <span id="playlist-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="playlist-instance_method">
  
    - (<tt>Object</tt>) <strong>playlist</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute playlist
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


181
182
183</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mpshell.rb', line 181</span>

<span class='def def kw'>def</span> <span class='playlist identifier id'>playlist</span>
  <span class='@playlist ivar id'>@playlist</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="pmode=-instance_method"></span>
      <span id="pmode-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="pmode-instance_method">
  
    - (<tt>Object</tt>) <strong>pmode</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute pmode
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


181
182
183</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mpshell.rb', line 181</span>

<span class='def def kw'>def</span> <span class='pmode identifier id'>pmode</span>
  <span class='@pmode ivar id'>@pmode</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="scan_mode=-instance_method"></span>
      <span id="scan_mode-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="scan_mode-instance_method">
  
    - (<tt>Object</tt>) <strong>scan_mode</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute scan_mode
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


181
182
183</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mpshell.rb', line 181</span>

<span class='def def kw'>def</span> <span class='scan_mode identifier id'>scan_mode</span>
  <span class='@scan_mode ivar id'>@scan_mode</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="trace=-instance_method"></span>
      <span id="trace-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="trace-instance_method">
  
    - (<tt>Object</tt>) <strong>trace</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute trace
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


181
182
183</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mpshell.rb', line 181</span>

<span class='def def kw'>def</span> <span class='trace identifier id'>trace</span>
  <span class='@trace ivar id'>@trace</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="kill_process-class_method">
  
    + (<tt>Object</tt>) <strong>kill_process</strong>(ptn, sig = &quot;HUP&quot;) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


236
237
238
239
240
241
242
243
244
245
246</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mpshell.rb', line 236</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='kill_process identifier id'>kill_process</span><span class='lparen token'>(</span><span class='ptn identifier id'>ptn</span><span class='comma token'>,</span> <span class='sig identifier id'>sig</span> <span class='assign token'>=</span> <span class='string val'>&quot;HUP&quot;</span><span class='rparen token'>)</span>
  <span class='Plog constant id'>Plog</span><span class='dot token'>.</span><span class='warn identifier id'>warn</span> <span class='dstring node'>&quot;Stopping process #{ptn}&quot;</span>
  <span class='pids identifier id'>pids</span> <span class='assign token'>=</span> <span class='xstring val'>`ps -ax`</span><span class='dot token'>.</span><span class='grep identifier id'>grep</span><span class='lparen token'>(</span><span class='ptn identifier id'>ptn</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='aline identifier id'>aline</span><span class='bitor op'>|</span>
    <span class='aline identifier id'>aline</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span>
  <span class='end end kw'>end</span>
  <span class='if if kw'>if</span> <span class='pids identifier id'>pids</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
    <span class='Process constant id'>Process</span><span class='dot token'>.</span><span class='kill identifier id'>kill</span><span class='lparen token'>(</span><span class='string val'>&quot;HUP&quot;</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='pids identifier id'>pids</span><span class='rparen token'>)</span>
    <span class='sleep identifier id'>sleep</span><span class='lparen token'>(</span><span class='integer val'>1</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='pids identifier id'>pids</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="start_monitor-class_method">
  
    + (<tt>Object</tt>) <strong>start_monitor</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Start the stand-alone monitor
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


220
221
222
223
224
225
226
227
228
229
230</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mpshell.rb', line 220</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='start_monitor identifier id'>start_monitor</span>
  <span class='stop_monitor identifier id'>stop_monitor</span>
  <span class='sleep identifier id'>sleep</span><span class='lparen token'>(</span><span class='integer val'>2</span><span class='rparen token'>)</span>
  <span class='opt identifier id'>opt</span> <span class='assign token'>=</span> <span class='string val'>&quot;-c -k&quot;</span>
  <span class='lbrack token'>[</span><span class='symbol val'>:karaoke</span><span class='comma token'>,</span> <span class='symbol val'>:verbose</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='anopt identifier id'>anopt</span><span class='bitor op'>|</span>
    <span class='if if kw'>if</span> <span class='MPShell constant id'>MPShell</span><span class='dot token'>.</span><span class='getOption identifier id'>getOption</span><span class='lparen token'>(</span><span class='anopt identifier id'>anopt</span><span class='rparen token'>)</span>
      <span class='opt identifier id'>opt</span> <span class='opasgn op'>+=</span> <span class='dstring node'>&quot; --#{anopt}&quot;</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='Pf constant id'>Pf</span><span class='dot token'>.</span><span class='system identifier id'>system</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{__FILE__} #{opt} pmonitor &amp;&quot;</span><span class='comma token'>,</span> <span class='integer val'>1</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="stop_monitor-class_method">
  
    + (<tt>Object</tt>) <strong>stop_monitor</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


232
233
234</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mpshell.rb', line 232</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='stop_monitor identifier id'>stop_monitor</span>
  <span class='kill_process identifier id'>kill_process</span><span class='lparen token'>(</span><span class='regexp val'>/ruby.*pmonitor/</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="add_songs-instance_method">
  
    - (<tt>Object</tt>) <strong>add_songs</strong>(mset, renew) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mpshell.rb', line 279</span>

<span class='def def kw'>def</span> <span class='add_songs identifier id'>add_songs</span><span class='lparen token'>(</span><span class='mset identifier id'>mset</span><span class='comma token'>,</span> <span class='renew identifier id'>renew</span><span class='rparen token'>)</span>
  <span class='Plog constant id'>Plog</span><span class='dot token'>.</span><span class='info identifier id'>info</span> <span class='dstring node'>&quot;Adding #{mset.size} song to player&quot;</span>
  <span class='ftime identifier id'>ftime</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
  <span class='mset identifier id'>mset</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='entry identifier id'>entry</span><span class='bitor op'>|</span>
    <span class='file identifier id'>file</span> <span class='assign token'>=</span> <span class='entry identifier id'>entry</span><span class='lbrack token'>[</span><span class='symbol val'>:path</span><span class='rbrack token'>]</span>
    <span class='if if kw'>if</span> <span class='file identifier id'>file</span> <span class='match op'>=~</span> <span class='regexp val'>/'/</span>
      <span class='Plog constant id'>Plog</span><span class='dot token'>.</span><span class='warn identifier id'>warn</span> <span class='dstring node'>&quot;Cannot post file with ': #{file}&quot;</span>
      <span class='next next kw'>next</span>
    <span class='end end kw'>end</span>
    <span class='if if kw'>if</span> <span class='renew identifier id'>renew</span>
      <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='dstring node'>&quot;loadfile '#{file}' 0&quot;</span><span class='comma token'>,</span> <span class='integer val'>3</span><span class='rparen token'>)</span>
      <span class='renew identifier id'>renew</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
    <span class='else else kw'>else</span>
      <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='dstring node'>&quot;loadfile '#{file}' 1&quot;</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
    <span class='comment val'>#---------------- 1st time must delay.  MP may be too busy startup ---</span>
    <span class='if if kw'>if</span> <span class='ftime identifier id'>ftime</span>
      <span class='sleep identifier id'>sleep</span> <span class='integer val'>2</span>
      <span class='ftime identifier id'>ftime</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='sleep identifier id'>sleep</span> <span class='integer val'>2</span>
  <span class='@playlist ivar id'>@playlist</span><span class='dot token'>.</span><span class='fmt_text identifier id'>fmt_text</span><span class='lparen token'>(</span><span class='mset identifier id'>mset</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="monitor_curfile-instance_method">
  
    - (<tt>Object</tt>) <strong>monitor_curfile</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Monitor the file being played. When mplayer switch to new song, it will be
detected here.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mpshell.rb', line 439</span>

<span class='def def kw'>def</span> <span class='monitor_curfile identifier id'>monitor_curfile</span>
  <span class='file identifier id'>file</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
  <span class='stopped identifier id'>stopped</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
  <span class='@rc ivar id'>@rc</span><span class='dot token'>.</span><span class='monitor_for identifier id'>monitor_for</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='line identifier id'>line</span><span class='comma token'>,</span> <span class='lcnt identifier id'>lcnt</span><span class='bitor op'>|</span>
    <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
    <span class='case case kw'>case</span> <span class='line identifier id'>line</span>
    <span class='when when kw'>when</span> <span class='regexp val'>/^Playing\s+/</span>
      <span class='file identifier id'>file</span> <span class='assign token'>=</span> <span class='$' back_ref id'>$'</span><span class='dot token'>.</span><span class='chomp identifier id'>chomp</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/\.$/</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='rparen token'>)</span>
      <span class='unless unless kw'>unless</span> <span class='file identifier id'>file</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
        <span class='if if kw'>if</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='symbol val'>:verbose</span><span class='rbrack token'>]</span>
          <span class='Plog constant id'>Plog</span><span class='dot token'>.</span><span class='info identifier id'>info</span> <span class='dstring node'>&quot;Detect #{File.basename(file)}&quot;</span>
        <span class='end end kw'>end</span>
        <span class='@lastfile ivar id'>@lastfile</span> <span class='assign token'>=</span> <span class='file identifier id'>file</span>
        <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
      <span class='end end kw'>end</span>
    <span class='when when kw'>when</span> <span class='regexp val'>/^Exiting\.\.\./</span>
      <span class='Plog constant id'>Plog</span><span class='dot token'>.</span><span class='warn identifier id'>warn</span> <span class='dstring node'>&quot;#{lcnt}. Mplayer exit ******&quot;</span>
    <span class='when when kw'>when</span> <span class='regexp val'>/ANS_LENGTH=/</span>
      <span class='duration identifier id'>duration</span> <span class='assign token'>=</span> <span class='$' back_ref id'>$'</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/\..*$/</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='rparen token'>)</span>
      <span class='comment val'>#p &quot;**** #{@lastfile}: #{duration}&quot;</span>
      <span class='@cursong ivar id'>@cursong</span><span class='dot token'>.</span><span class='set_duration identifier id'>set_duration</span><span class='lparen token'>(</span><span class='duration identifier id'>duration</span><span class='rparen token'>)</span>
    <span class='when when kw'>when</span> <span class='regexp val'>/MPlayer interrupted by signal/</span>
      <span class='Plog constant id'>Plog</span><span class='dot token'>.</span><span class='warn identifier id'>warn</span> <span class='$line gvar id'>$line</span>
      <span class='stopped identifier id'>stopped</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
    <span class='end end kw'>end</span>
    <span class='state identifier id'>state</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="osd-instance_method">
  
    - (<tt>Object</tt>) <strong>osd</strong>(msg) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


271
272
273</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mpshell.rb', line 271</span>

<span class='def def kw'>def</span> <span class='osd identifier id'>osd</span><span class='lparen token'>(</span><span class='msg identifier id'>msg</span><span class='rparen token'>)</span>
  <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='dstring node'>&quot;osd_show_text '#{msg}' 3000&quot;</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="run_init-instance_method">
  
    - (<tt>Object</tt>) <strong>run_init</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
This is _run after player has started
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mpshell.rb', line 200</span>

<span class='def def kw'>def</span> <span class='run_init identifier id'>run_init</span>
  <span class='slist identifier id'>slist</span>    <span class='assign token'>=</span> <span class='@playlist ivar id'>@playlist</span><span class='dot token'>.</span><span class='data identifier id'>data</span>

  <span class='comment val'># Skip the ones already played.</span>
  <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='opos identifier id'>opos</span> <span class='assign token'>=</span> <span class='@cursong ivar id'>@cursong</span><span class='dot token'>.</span><span class='position identifier id'>position</span><span class='rparen token'>)</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
    <span class='if if kw'>if</span> <span class='opos identifier id'>opos</span> <span class='lt op'>&lt;</span> <span class='slist identifier id'>slist</span><span class='dot token'>.</span><span class='size identifier id'>size</span>
      <span class='@playlist ivar id'>@playlist</span><span class='dot token'>.</span><span class='truncate identifier id'>truncate</span><span class='lparen token'>(</span><span class='slist identifier id'>slist</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='minus op'>-</span> <span class='opos identifier id'>opos</span><span class='rparen token'>)</span>
      <span class='@cursong ivar id'>@cursong</span><span class='dot token'>.</span><span class='position identifier id'>position</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
      <span class='slist identifier id'>slist</span> <span class='assign token'>=</span> <span class='@playlist ivar id'>@playlist</span><span class='dot token'>.</span><span class='data identifier id'>data</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># This must run after the player has started</span>
  <span class='if if kw'>if</span> <span class='slist identifier id'>slist</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
    <span class='add_songs identifier id'>add_songs</span><span class='lparen token'>(</span><span class='slist identifier id'>slist</span><span class='comma token'>,</span> <span class='true true kw'>true</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='@cursong ivar id'>@cursong</span><span class='dot token'>.</span><span class='refresh identifier id'>refresh</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="send-instance_method">
  
    - (<tt>Object</tt>) <strong>send</strong>(msg, wait = 0) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


275
276
277</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mpshell.rb', line 275</span>

<span class='def def kw'>def</span> <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='msg identifier id'>msg</span><span class='comma token'>,</span> <span class='wait identifier id'>wait</span> <span class='assign token'>=</span> <span class='integer val'>0</span><span class='rparen token'>)</span>
  <span class='@rc ivar id'>@rc</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='msg identifier id'>msg</span><span class='comma token'>,</span> <span class='wait identifier id'>wait</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="show_playlist-instance_method">
  
    - (<tt>Object</tt>) <strong>show_playlist</strong>(range = nil) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mpshell.rb', line 416</span>

<span class='def def kw'>def</span> <span class='show_playlist identifier id'>show_playlist</span><span class='lparen token'>(</span><span class='range identifier id'>range</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='@playlist ivar id'>@playlist</span><span class='dot token'>.</span><span class='data identifier id'>data</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='leq op'>&lt;=</span> <span class='integer val'>0</span>
    <span class='return return kw'>return</span>
  <span class='end end kw'>end</span>
  <span class='@cursong ivar id'>@cursong</span><span class='dot token'>.</span><span class='refresh identifier id'>refresh</span>
  <span class='cur_index identifier id'>cur_index</span> <span class='assign token'>=</span> <span class='@cursong ivar id'>@cursong</span><span class='dot token'>.</span><span class='position identifier id'>position</span>
  <span class='if if kw'>if</span> <span class='range identifier id'>range</span>
    <span class='start identifier id'>start</span><span class='comma token'>,</span> <span class='size identifier id'>size</span> <span class='assign token'>=</span> <span class='range identifier id'>range</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='regexp val'>/,/</span><span class='rparen token'>)</span>
    <span class='start identifier id'>start</span> <span class='assign token'>=</span> <span class='start identifier id'>start</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span> <span class='integer val'>? </span><span class='cur_index identifier id'>cur_index</span><span class='minus op'>-</span><span class='integer val'>3</span> <span class='colon op'>:</span> <span class='start identifier id'>start</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span>
    <span class='if if kw'>if</span> <span class='size identifier id'>size</span>
      <span class='@listsize ivar id'>@listsize</span> <span class='assign token'>=</span> <span class='size identifier id'>size</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span>
    <span class='end end kw'>end</span>
  <span class='else else kw'>else</span>
    <span class='start identifier id'>start</span> <span class='assign token'>=</span> <span class='cur_index identifier id'>cur_index</span> <span class='minus op'>-</span> <span class='integer val'>3</span>
    <span class='size identifier id'>size</span> <span class='assign token'>=</span> <span class='@listsize ivar id'>@listsize</span>
  <span class='end end kw'>end</span>
  <span class='start identifier id'>start</span> <span class='assign token'>=</span> <span class='integer val'>0</span> <span class='if if_mod kw'>if</span> <span class='lparen token'>(</span><span class='start identifier id'>start</span> <span class='lt op'>&lt;</span> <span class='integer val'>0</span><span class='rparen token'>)</span>
  <span class='size identifier id'>size</span> <span class='opasgn op'>||=</span> <span class='@listsize ivar id'>@listsize</span>
  <span class='@playlist ivar id'>@playlist</span><span class='dot token'>.</span><span class='fmt_text identifier id'>fmt_text</span><span class='lparen token'>(</span><span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='start identifier id'>start</span><span class='comma token'>,</span> <span class='cur_index identifier id'>cur_index</span><span class='comma token'>,</span> <span class='size identifier id'>size</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="song_jump-instance_method">
  
    - (<tt>Object</tt>) <strong>song_jump</strong>(target) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


387
388
389
390
391
392
393</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mpshell.rb', line 387</span>

<span class='def def kw'>def</span> <span class='song_jump identifier id'>song_jump</span><span class='lparen token'>(</span><span class='target identifier id'>target</span><span class='rparen token'>)</span>
  <span class='@cursong ivar id'>@cursong</span><span class='dot token'>.</span><span class='refresh identifier id'>refresh</span>
  <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='cur_index identifier id'>cur_index</span> <span class='assign token'>=</span> <span class='@cursong ivar id'>@cursong</span><span class='dot token'>.</span><span class='position identifier id'>position</span><span class='rparen token'>)</span> <span class='geq op'>&gt;=</span> <span class='integer val'>0</span>
    <span class='offset identifier id'>offset</span> <span class='assign token'>=</span> <span class='target identifier id'>target</span> <span class='minus op'>-</span> <span class='cur_index identifier id'>cur_index</span>
    <span class='song_step identifier id'>song_step</span><span class='lparen token'>(</span><span class='offset identifier id'>offset</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="song_step-instance_method">
  
    - (<tt>Object</tt>) <strong>song_step</strong>(step) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mpshell.rb', line 352</span>

<span class='def def kw'>def</span> <span class='song_step identifier id'>song_step</span><span class='lparen token'>(</span><span class='step identifier id'>step</span><span class='rparen token'>)</span>
  <span class='step identifier id'>step</span>  <span class='assign token'>=</span> <span class='step identifier id'>step</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span>
  <span class='nstep identifier id'>nstep</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='step identifier id'>step</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='integer val'>1</span> <span class='colon op'>:</span> <span class='integer val'>-1</span>
  <span class='if if kw'>if</span> <span class='step identifier id'>step</span> <span class='eq op'>==</span> <span class='integer val'>0</span>
    <span class='send identifier id'>send</span> <span class='string val'>'seek 1 2'</span>
    <span class='return return kw'>return</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Need to skip over the disabled songs</span>
  <span class='acstep identifier id'>acstep</span>  <span class='assign token'>=</span> <span class='integer val'>0</span>
  <span class='plsongs identifier id'>plsongs</span> <span class='assign token'>=</span> <span class='@playlist ivar id'>@playlist</span><span class='dot token'>.</span><span class='dbrec identifier id'>dbrec</span><span class='dot token'>.</span><span class='pl_songs identifier id'>pl_songs</span>
  <span class='curpos identifier id'>curpos</span>  <span class='assign token'>=</span> <span class='@cursong ivar id'>@cursong</span><span class='dot token'>.</span><span class='position identifier id'>position</span>
  <span class='curpos identifier id'>curpos</span> <span class='opasgn op'>+=</span> <span class='step identifier id'>step</span>
  <span class='acstep identifier id'>acstep</span> <span class='opasgn op'>+=</span> <span class='step identifier id'>step</span>
  <span class='while while kw'>while</span> <span class='lparen token'>(</span><span class='curpos identifier id'>curpos</span> <span class='geq op'>&gt;=</span> <span class='integer val'>0</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='lparen token'>(</span><span class='curpos identifier id'>curpos</span> <span class='lt op'>&lt;</span> <span class='@playlist ivar id'>@playlist</span><span class='dot token'>.</span><span class='data identifier id'>data</span><span class='dot token'>.</span><span class='size identifier id'>size</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='plsongs identifier id'>plsongs</span><span class='lbrack token'>[</span><span class='curpos identifier id'>curpos</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='state identifier id'>state</span> <span class='eq op'>==</span> <span class='integer val'>0</span>
      <span class='break break kw'>break</span>
    <span class='end end kw'>end</span>
    <span class='Plog constant id'>Plog</span><span class='dot token'>.</span><span class='info identifier id'>info</span> <span class='dstring node'>&quot;Skipping #{curpos} - #{@playlist[curpos].song}&quot;</span>
    <span class='curpos identifier id'>curpos</span> <span class='opasgn op'>+=</span> <span class='nstep identifier id'>nstep</span>
    <span class='acstep identifier id'>acstep</span> <span class='opasgn op'>+=</span> <span class='nstep identifier id'>nstep</span>
  <span class='end end kw'>end</span>
  <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='curpos identifier id'>curpos</span> <span class='lt op'>&lt;</span> <span class='integer val'>0</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='lparen token'>(</span><span class='curpos identifier id'>curpos</span> <span class='geq op'>&gt;=</span> <span class='@playlist ivar id'>@playlist</span><span class='dot token'>.</span><span class='data identifier id'>data</span><span class='dot token'>.</span><span class='size identifier id'>size</span><span class='rparen token'>)</span>
    <span class='Plog constant id'>Plog</span><span class='dot token'>.</span><span class='warn identifier id'>warn</span> <span class='dstring node'>&quot;Move to out of range #{curpos}&quot;</span>
    <span class='return return kw'>return</span>
  <span class='end end kw'>end</span>
  <span class='@cursong ivar id'>@cursong</span><span class='dot token'>.</span><span class='position identifier id'>position</span> <span class='assign token'>=</span> <span class='curpos identifier id'>curpos</span>

  <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='dstring node'>&quot;pausing_keep_force pt_step #{acstep}&quot;</span><span class='comma token'>,</span> <span class='integer val'>3</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='@scan_mode ivar id'>@scan_mode</span>
    <span class='sleep identifier id'>sleep</span> <span class='integer val'>3</span>
    <span class='send identifier id'>send</span> <span class='string val'>&quot;seek 60&quot;</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="sound_normalize-instance_method">
  
    - (<tt>Object</tt>) <strong>sound_normalize</strong>(ksel = nil, omode = nil) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mpshell.rb', line 304</span>

<span class='def def kw'>def</span> <span class='sound_normalize identifier id'>sound_normalize</span><span class='lparen token'>(</span><span class='ksel identifier id'>ksel</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='omode identifier id'>omode</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='unless unless kw'>unless</span> <span class='ksel identifier id'>ksel</span>
    <span class='@cursong ivar id'>@cursong</span><span class='dot token'>.</span><span class='refresh identifier id'>refresh</span>
    <span class='ksel identifier id'>ksel</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='@cursong ivar id'>@cursong</span><span class='dot token'>.</span><span class='ksel identifier id'>ksel</span> <span class='orop op'>||</span> <span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/^.*\./</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='Plog constant id'>Plog</span><span class='dot token'>.</span><span class='info identifier id'>info</span> <span class='dstring node'>&quot;Switch to #{@pmode}&quot;</span>
  <span class='case case kw'>case</span> <span class='ksel identifier id'>ksel</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='comma token'>,</span><span class='integer val'>1</span><span class='rbrack token'>]</span>
  <span class='when when kw'>when</span> <span class='string val'>'F'</span>
    <span class='if if kw'>if</span> <span class='@pmode ivar id'>@pmode</span> <span class='eq op'>==</span> <span class='symbol val'>:sound</span>
      <span class='send identifier id'>send</span> <span class='string val'>'switch_audio'</span>
    <span class='else else kw'>else</span>
      <span class='if if kw'>if</span> <span class='omode identifier id'>omode</span> <span class='andop op'>&amp;&amp;</span> <span class='lparen token'>(</span><span class='omode identifier id'>omode</span> <span class='eq op'>==</span> <span class='symbol val'>:sound</span><span class='rparen token'>)</span>
        <span class='send identifier id'>send</span> <span class='string val'>'switch_audio'</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='when when kw'>when</span> <span class='string val'>'S'</span>
    <span class='if if kw'>if</span> <span class='@pmode ivar id'>@pmode</span> <span class='eq op'>==</span> <span class='symbol val'>:karaoke</span>
      <span class='send identifier id'>send</span> <span class='string val'>'switch_audio'</span>
    <span class='else else kw'>else</span>
      <span class='if if kw'>if</span> <span class='omode identifier id'>omode</span> <span class='andop op'>&amp;&amp;</span> <span class='lparen token'>(</span><span class='omode identifier id'>omode</span> <span class='eq op'>==</span> <span class='symbol val'>:karaoke</span><span class='rparen token'>)</span>
        <span class='send identifier id'>send</span> <span class='string val'>'switch_audio'</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='when when kw'>when</span> <span class='string val'>'L'</span>
    <span class='if if kw'>if</span> <span class='@pmode ivar id'>@pmode</span> <span class='eq op'>==</span> <span class='symbol val'>:sound</span>
      <span class='send identifier id'>send</span> <span class='string val'>&quot;balance 2&quot;</span>
    <span class='else else kw'>else</span>
      <span class='send identifier id'>send</span> <span class='string val'>&quot;balance -2&quot;</span>
    <span class='end end kw'>end</span>
  <span class='when when kw'>when</span> <span class='string val'>'R'</span>
    <span class='if if kw'>if</span> <span class='@pmode ivar id'>@pmode</span> <span class='eq op'>==</span> <span class='symbol val'>:karaoke</span>
      <span class='send identifier id'>send</span> <span class='string val'>'balance 2'</span>
    <span class='else else kw'>else</span>
      <span class='send identifier id'>send</span> <span class='string val'>'balance -2'</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='case case kw'>case</span> <span class='ksel identifier id'>ksel</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='comma token'>,</span><span class='integer val'>1</span><span class='rbrack token'>]</span>
  <span class='when when kw'>when</span> <span class='string val'>'W'</span>
    <span class='send identifier id'>send</span> <span class='string val'>'switch_ratio 1.6667'</span>
  <span class='when when kw'>when</span> <span class='string val'>'N'</span>
    <span class='send identifier id'>send</span> <span class='string val'>'switch_ratio 1.3333'</span>
  <span class='end end kw'>end</span>

  <span class='send identifier id'>send</span> <span class='dstring node'>&quot;volume #{@volume} 1&quot;</span>
  <span class='send identifier id'>send</span> <span class='string val'>&quot;get_time_length&quot;</span><span class='comma token'>,</span> <span class='integer val'>1</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="stop-instance_method">
  
    - (<tt>Object</tt>) <strong>stop</strong>(killit = false) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


248
249
250
251</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mpshell.rb', line 248</span>

<span class='def def kw'>def</span> <span class='stop identifier id'>stop</span><span class='lparen token'>(</span><span class='killit identifier id'>killit</span> <span class='assign token'>=</span> <span class='false false kw'>false</span><span class='rparen token'>)</span>
  <span class='send identifier id'>send</span> <span class='string val'>&quot;stop&quot;</span>
  <span class='MPlayer constant id'>MPlayer</span><span class='dot token'>.</span><span class='kill_existing_players identifier id'>kill_existing_players</span> <span class='if if_mod kw'>if</span> <span class='killit identifier id'>killit</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="switch_aspect-instance_method">
  
    - (<tt>Object</tt>) <strong>switch_aspect</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


406
407
408
409
410
411
412
413
414</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mpshell.rb', line 406</span>

<span class='def def kw'>def</span> <span class='switch_aspect identifier id'>switch_aspect</span>
  <span class='if if kw'>if</span> <span class='@aspect ivar id'>@aspect</span> <span class='eq op'>==</span> <span class='symbol val'>:normal</span>
    <span class='send identifier id'>send</span> <span class='string val'>&quot;switch_ratio 1.667&quot;</span>
    <span class='@aspect ivar id'>@aspect</span> <span class='assign token'>=</span> <span class='symbol val'>:wide</span>
  <span class='else else kw'>else</span>
    <span class='send identifier id'>send</span> <span class='string val'>&quot;switch_ratio 1.333&quot;</span>
    <span class='@aspect ivar id'>@aspect</span> <span class='assign token'>=</span> <span class='symbol val'>:normal</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="switch_channel-instance_method">
  
    - (<tt>Object</tt>) <strong>switch_channel</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


395
396
397
398
399
400
401
402
403
404</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mpshell.rb', line 395</span>

<span class='def def kw'>def</span> <span class='switch_channel identifier id'>switch_channel</span>
  <span class='if if kw'>if</span> <span class='@channel ivar id'>@channel</span> <span class='eq op'>==</span> <span class='symbol val'>:left</span>
    <span class='send identifier id'>send</span> <span class='string val'>&quot;balance 2&quot;</span>
    <span class='@channel ivar id'>@channel</span> <span class='assign token'>=</span> <span class='symbol val'>:right</span>
  <span class='else else kw'>else</span>
    <span class='send identifier id'>send</span> <span class='string val'>&quot;balance -2&quot;</span>
    <span class='@channel ivar id'>@channel</span> <span class='assign token'>=</span> <span class='symbol val'>:left</span>
  <span class='end end kw'>end</span>
  <span class='send identifier id'>send</span> <span class='dstring node'>&quot;volume #{@volume} 1&quot;</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="toggle_pmode-instance_method">
  
    - (<tt>Object</tt>) <strong>toggle_pmode</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


253
254
255
256
257
258</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mpshell.rb', line 253</span>

<span class='def def kw'>def</span> <span class='toggle_pmode identifier id'>toggle_pmode</span>
  <span class='omode identifier id'>omode</span>  <span class='assign token'>=</span> <span class='@pmode ivar id'>@pmode</span>
  <span class='@pmode ivar id'>@pmode</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='@pmode ivar id'>@pmode</span> <span class='eq op'>==</span> <span class='symbol val'>:sound</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='symbol val'>:karaoke</span> <span class='colon op'>:</span> <span class='symbol val'>:sound</span>
  <span class='sound_normalize identifier id'>sound_normalize</span><span class='lparen token'>(</span><span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='omode identifier id'>omode</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="toggle_scan-instance_method">
  
    - (<tt>Object</tt>) <strong>toggle_scan</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


266
267
268
269</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mpshell.rb', line 266</span>

<span class='def def kw'>def</span> <span class='toggle_scan identifier id'>toggle_scan</span>
  <span class='@scan_mode ivar id'>@scan_mode</span> <span class='assign token'>=</span> <span class='notop op'>!</span><span class='@scan_mode ivar id'>@scan_mode</span>
  <span class='Plog constant id'>Plog</span><span class='dot token'>.</span><span class='info identifier id'>info</span> <span class='dstring node'>&quot;Scan mode is #{@scan_mode}&quot;</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="toggle_trace-instance_method">
  
    - (<tt>Object</tt>) <strong>toggle_trace</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


260
261
262
263
264</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mpshell.rb', line 260</span>

<span class='def def kw'>def</span> <span class='toggle_trace identifier id'>toggle_trace</span>
  <span class='@trace ivar id'>@trace</span> <span class='assign token'>=</span> <span class='notop op'>!</span><span class='@trace ivar id'>@trace</span>
  <span class='Plog constant id'>Plog</span><span class='dot token'>.</span><span class='info identifier id'>info</span> <span class='dstring node'>&quot;Trace is #{@trace}&quot;</span>
  <span class='self self kw'>self</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Sat Nov 13 19:11:23 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.8.7).
</div>

  </body>
</html>